// Generated by CoffeeScript 1.3.1
(function() {
  var socket;

  socket = io.connect();

  socket.on("connect", function() {
    return console.log("connected");
  });

  socket.on("message", function(message) {
    console.log("Message from server: " + message);
    message = JSON.parse(message);
    $('#' + message.id).text(message.controllers.state);
    if (message[0] === "state") {
      $('#switch button').removeClass('active');
      if (message[1] === "on") {
        return $('#switch button[value=on]').addClass('active');
      } else if (message[1] === "off") {
        return $('#switch button[value=off]').addClass('active');
      }
    }
  });

  this.sendState = function(id, data) {
    var message, myData;
    myData = {
      id: "123456",
      controllers: {
        state: data
      }
    };
    message = JSON.stringify(myData);
    console.log("sending.." + message);
    socket.send(message);
    return console.log("sending completed");
  };

  this.sendId = function(id) {
    console.log("sending..");
    socket.send("id:" + id);
    return console.log("sending completed");
  };

}).call(this);
